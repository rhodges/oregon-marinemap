
<h1 align="center">{{ geo.nsh.name }}</h1>
<h1 align="center">Comprehensive Analysis Report</h1>

<div class="img" align="middle" >
    <table width="100%">
        <tr>
            <td></td>
            <td>
                &nbsp; <img class="aoi" align="right" src="{% url staticmap-show 'default' %}?mpas={{ geo.nsh.id }}&amp;autozoom=true&amp;width=308&amp;height=400">
            </td>
            <td></td>
        </tr>
    </table>
</div>

<div class='freetext'>

<!-- Geographic Report -->

<br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="geoheader" colspan="5">General Spatial Characteristics</th>
        </tr>
        <tr>
            <th>Area</th>
            <th>Perimeter</th>
            <th>Intertidal</th>
            <th>Islands</th>
            <th>Percent of Territorial Sea</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>{{geo.area|floatformat:'2'}} {{geo.area_units}}</td>
            <td>{{geo.perimeter|floatformat:'2'}} {{geo.length_units}}</td>
            <td>{{geo.intertidal}}</td>
            <td>{{geo.islands}}</td>
            <td>{{geo.ratio|floatformat:'2'}}%</td>
        </tr>
    </tbody>
</table>
<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="geoheader" colspan="4">Geographic Setting</th>
        </tr>
        <tr>
            <th>Adjacent County</th>
            <th>Nearest Ports</th>
            <th>Nearest Incorporated Cities</th>
            <th>Nearest Rocky Shore Areas</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td valign="top">     {{geo.county.0}} 
                <br> {{geo.county.1}} 
                <br> {{geo.county.2}}
            </td>
            <td>     {{geo.ports.0.0}}  ({{geo.ports.0.1|floatformat:'1'}}{{geo.length_units}})
                <br> {{geo.ports.1.0}}  ({{geo.ports.1.1|floatformat:'1'}}{{geo.length_units}})
                <br> {{geo.ports.2.0}}  ({{geo.ports.2.1|floatformat:'1'}}{{geo.length_units}})
            </td>
            <td>     {{geo.cities.0.0}}  ({{geo.cities.0.1|floatformat:'1'}}{{geo.length_units}})
                <br> {{geo.cities.1.0}}  ({{geo.cities.1.1|floatformat:'1'}}{{geo.length_units}})
                <br> {{geo.cities.2.0}}  ({{geo.cities.2.1|floatformat:'1'}}{{geo.length_units}})
            </td>
            <td>     {{geo.rockyshores.0.0}}  ({{geo.rockyshores.0.1|floatformat:'1'}}{{geo.length_units}})
                <br> {{geo.rockyshores.1.0}}  ({{geo.rockyshores.1.1|floatformat:'1'}}{{geo.length_units}})
                <br> {{geo.rockyshores.2.0}}  ({{geo.rockyshores.2.1|floatformat:'1'}}{{geo.length_units}})
            </td>
        </tr>
    </tbody>
</table>


<!-- Physical Report -->

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="phyheader" colspan="7">Intertidal Physical Characteristics</th>
        </tr>
        <tr>
            <th>Length of Intertidal Shoreline</th>
            <th>Percent of Oregon Coast Shoreline</th>
            <th colspan="3">Shoreline Types & Proportions</th>
            <th>Number of Islands</th>
            <th>Total Island Area</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td valign="top">{{phy.length|floatformat:'2'}} {{phy.length_units}}</td>
            {% if phy.percent_shoreline == phy.default_value %}
            <td valign="top">{{phy.default_value}}</td>
            {% else %}
            <td valign="top">{{phy.percent_shoreline|floatformat:'2'}}%</td>
            {% endif %}
            <td valign="top" colspan="3">
                {% for proportion in phy.shoreline_proportions %}
                    {{proportion.0|floatformat:'0'}}% &nbsp; &nbsp; {{proportion.1}} &nbsp; &nbsp; ({{proportion.2|floatformat:'2'}}{{phy.length_units}}) </br>
                {% endfor %}
            </td>
            <td valign="top">{{phy.islands}} islands</td>
            {% if phy.island_area == phy.default_value %}
            <td valign="top">{{phy.default_value}}</td>
            {% else %}
            <td valign="top">{{phy.island_area|floatformat:'3'}} {{phy.area_units}}</td>
            {% endif %}
        </tr>
    </tbody>
</table>

<br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="phyheader" colspan="6">Subtidal Physical Characteristics</th>
        </tr>
        <tr>
            <th>Subtidal Area</th>
            <th>Percent Shallow <br/>Percent Deep</th>
            <th colspan="2">Seafloor Lithology</th>
            <th>Average Depth</th>
            <th>Proximity to Shore</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td valign="top">{{phy.subtidal_area|floatformat:'1'}} {{phy.area_units}}</td>
            <td valign="top">{{phy.perc_shallow|floatformat:'1'}}% &nbsp; shallow<br/> {{phy.perc_deep|floatformat:'1'}} % &nbsp; deep</td>
            <td valign="top" colspan="2">
                {% for proportion in phy.lithology_proportions %}
                    {{proportion.0|floatformat:'1'}}% &nbsp; {{proportion.1}} &nbsp; ({{proportion.2|floatformat:'2'}}{{phy.length_units}}) </br>
                {% endfor %}
            </td>
            <td valign="top">{{phy.average_depth|floatformat:'2'}} meters</td>
            <td valign="top">{{phy.distance_to_shore|floatformat:'1'}} {{phy.length_units}}</td>
        </tr>
    </tbody>
</table>

<!-- Biology Report -->

<div>
    <pdf:nextpage />
</div>

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="bioheader" colspan="4">Intertidal Biological Characteristics</th>
        </tr>
        <tr>
            <th>Pinniped Haulouts</th>
            <th>Stellar Sea Lion Rookeries</th>
            <th colspan="2">Bird Colonies</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            {% if bio.num_haulouts == 0 %}
            <td>No ({{bio.num_haulouts}} haulouts)</td>
            {% else %}
            <td>Yes ({{bio.num_haulouts}} haulouts)</td>
            {% endif %}
            
            {% if bio.num_rookeries == 0 %}
            <td>No ({{bio.num_rookeries}} rookeries)</td>
            {% else %}
            <td>Yes ({{bio.num_rookeries}} rookeries)</td>
            {% endif %}
            
            {% if bio.bird_colonies == 0 %}
            <td colspan="2">No ({{bio.bird_colonies}} colonies) &nbsp;</td>
            {% else %}
            <td colspan="2">Yes ({{bio.bird_colonies}} colonies) &nbsp;</td>
            {% endif %}
        </tr>
    </tbody>
    <thead>
        <tr>
            <th colspan="2">Pinniped Haulout Details</th>
            <th colspan="2">Bird Colony Details</th>
        </tr>
    </thead>
    <tbody>
        <tr>
        <td class="top" colspan="2" valign="top">
        {% for site in bio.haulout_sites %}
            {{site.0.0}} , ({{site.0.1}})</br>
            {% for species in site.1 %}
                &nbsp; &nbsp; &nbsp; {{species}} </br>
            {% endfor %}
            </br>
        {% endfor %}
        </td>
        
        <td colspan="2">
        {% for details in bio.bird_details %}
            {{details.0.0}} , (Colony #{{details.0.1}})<br>
            {% for bird in details.1 %}
                {{bird}} &nbsp;
            {% endfor %}
            <br><br>
        {% endfor %}
        </td>
            
        </tr>
    </tbody>
</table>

<br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="bioheader" colspan="2">Subtidal Biological Characteristics</th>
        </tr>
        <tr>
            <th>Habitat Types & Proportions</th>
            <th>Predicted Fish Species <br>(Provided by <a target="_blank" href="http://www.nwfsc.noaa.gov/">NOAA's Northwest Fisheries Science Center)</p></a></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td valign="top" class="top">
            {% for details in bio.habitat_proportions %}
                {{details.0|floatformat:'2'}}% &nbsp; {{details.1}} &nbsp; ({{details.2|floatformat:'2'}} {{bio.area_units}})</br>
            {% endfor %}
            </td>
            <td>
            {% for fish in bio.fish_list %}
                {{fish}} &nbsp;
            {% endfor %}
            </td>
        </tr>
    </tbody>
    <thead>
        <tr>
            <th>Kelp Survey Year</th>
            <th>Kelp Proportions</th>
        </tr>
    </thead>
    <tbody>
        {% if bio.kelp_data.0.2 == bio.default_value %}
            <tr>
                <td>{{bio.kelp_data.0.0}}</td>
                <td></td>
            </tr>
        {% else %}
            {% for data in bio.kelp_data %}
            <tr class="{% cycle '' 'grey' %}">
                <td>{{data.0}}</td>
                <td>{{data.1|floatformat:'2'}} {{bio.area_units}} &nbsp; ({{data.2|floatformat:'2'}} % of Proposed Site)</td>
            </tr>
            {% endfor %}
        {% endif %}
    </tbody>
</table>

<!-- Human Uses Report -->

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="humheader" colspan="2">Community & Recreational Considerations</th>
        </tr>
        <tr>
            <th>Nearest State Parks</th>
            <th>Nearest Public Access</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
            {% for park in hum.parks %}
                {{park.0}} State Park &nbsp; ({{park.1|floatformat:'2'}}{{hum.length_units}})</br>
            {% endfor %}
            </td>
            <td>
            {% for site in hum.access_sites %}
                {{site.0}} &nbsp; ({{site.1|floatformat:'1'}}{{hum.length_units}})</br>
            {% endfor %}
            </td>
        </tr>
    </tbody>
</table>

<br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="humheader" colspan="9">Existing or Proposed Transportation & Infrasructure Considerations</th>
        </tr>
        <tr>
            <th colspan="2">Dredge Materials Disposal</th>
            <th colspan="2">NPDES Outfall</th>
            <th colspan="2">Undersea Cables</th>
            <th>Towlanes</th>
            <th colspan="2">Wave Energy</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td colspan="2">{{hum.dmd_data.0}}</td>
            <td colspan="2">{{hum.outfall_data.0}}</td>
            <td colspan="2">{{hum.cable_data.0}}</td>
            <td>{{hum.towlanes}}</td>
            <td colspan="2">{{hum.wave_energy_data.0}}</td>
        </tr>
    </tbody>
    <thead>
        <tr>
            {% if hum.dmd_data.0 == 'Yes' %}
                <th colspan="2">Intersecting DMD Sites</th>
            {% else %}
                <th colspan="2">Closest DMD Sites</th>
            {% endif %}
            
            {% if hum.outfall_data.0 == 'Yes' %}
                <th colspan="2">Intersecting Outfall Sites</th>
            {% else %}
                <th colspan="2">Closest Outfall</th>
            {% endif %}
            
            {% if hum.cable_data.0 == 'Yes' %}
                <th colspan="2">Intersecting Cables</th>
            {% else %}
                <th colspan="2">Closest Cable</th>
            {% endif %}
            
            <th></th>
            
            {% if hum.wave_energy_data.0 == 'Yes' %}
                <th colspan="2">Intersecting Wave Energy</th>
            {% else %}
                <th colspan="2">Closest Wave Energy</th>
            {% endif %}
        </tr>
    </thead>
    <tbody>
        <tr>
            <td valign="top" colspan="2">
                {% if hum.dmd_data.0 == 'Yes' %}
                    {% for data in hum.dmd_data.1 %}
                        {{data}}</br>
                    {% endfor %}
                {% else %}
                    {{hum.dmd_data.1.0}} ({{hum.dmd_data.1.1|floatformat:'2'}}{{hum.length_units}})
                {% endif %}
            </td>
            <td valign="top" colspan="2">
                {% if hum.outfall_data.0 == 'Yes' %}
                    {% for data in hum.outfall_data.1 %}
                        {{data}}</br>
                    {% endfor %}
                {% else %}
                    {{hum.outfall_data.1.0}} ({{hum.outfall_data.1.1|floatformat:'2'}}{{hum.length_units}})
                {% endif %}
            </td>
            <td valign="top" colspan="2">
                {% if hum.cable_data.0 == 'Yes' %}
                    {% for data in hum.cable_data.1 %}
                        {{data}}</br>
                    {% endfor %}
                {% else %}
                    {{hum.cable_data.1.0}} ({{hum.cable_data.1.1|floatformat:'2'}}{{hum.length_units}})
                {% endif %}
            </td>
            <td></td>
            <td valign="top" colspan="2">
                {% if hum.wave_energy_data.0 == 'Yes' %}
                    {% for data in hum.wave_energy_data.1 %}
                        {{data}}</br>
                    {% endfor %}
                {% else %}
                    {{hum.wave_energy_data.1.0.0}} ({{hum.wave_energy_data.1.0.1|floatformat:'2'}}{{hum.length_units}})
                {% endif %}
            </td>
        </tr>
    </tbody>
</table>

<br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="humheader" colspan="6">Fishery Considerations</th>
        </tr>
        <tr>
            <th colspan="2">Proximity to Ports</th>
            <th colspan="2">ODFW Closures</th>
            <th colspan="2">Nearest (non-instersecting) ODFW Closure</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td valign="top" colspan="2">
                {% for port in hum.nearest_ports %}
                    {{port.0}} ({{port.1|floatformat:'1'}}{{hum.length_units}})</br>
                {% endfor %}
            </td>
            <td valign="top" colspan="2">
                {% for closure in hum.intersecting_closures %}
                    {{closure}}</br>
                {% endfor %}
            </td>
            <td valign="top" colspan="2">
                {{hum.nearest_closure.0}} ({{hum.nearest_closure.1|floatformat:'1'}} {{hum.length_units}})
            </td>
        </tr>
    </tbody>
    <thead>
        <tr>
            <th colspan="1">Marine Managed Areas</th>
            <th colspan="2">Nearest (non-intersecting) Marine Managed Areas</th>
            <th colspan="1">EFH Conservation Areas</th>
            <th colspan="2">Nearest (non-intersecting) EFH Conservation Area</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td valign="top" colspan="1">
                {% for mma in hum.intersecting_mmas %}
                    {{mma}}</br>
                {% endfor %}
            </td>
            <td valign="top" colspan="2">
                {% for mma in hum.nearest_mmas %}
                    {{mma.0}} ({{mma.1|floatformat:'1'}} {{hum.length_units}})</br>
                {% endfor %}
            </td>
            <td valign="top" colspan="1">
                {% for area in hum.intersecting_conservation_areas %}
                    {{area}}</br>
                {% endfor %}
            </td>
            <td valign="top" colspan="2">
                {{hum.nearest_conservation_area.0}} ({{hum.nearest_conservation_area.1|floatformat:'1'}} {{hum.length_units}})</br>
            </td>
        </tr>
    </tbody>
</table>

<br></br>
<br></br>

</div>

<style type="text/css">
div.img img.aoi {
    zoom: 80%;
}

div.img img.sr {
    zoom: 80%;
    vertical-align: text-top;
}

table.summary-table {
    font-family:helvetica;
    font-size:11px;
}

table.marinemap-table {
    font-size:9px;
    width:100%;
    border:solid 1px #fff;
    margin:3px;
    padding-top:3px;
}

table.marinemap-table th.geoheader {
    background-color:#518E58;
    color:#B0B0B0;
    font-family:helvetica;
    font-weight:bold;
}

table.marinemap-table th.phyheader {
    background-color:#4D50DF;
    color:#B0B0B0;
    font-family:helvetica;
    font-weight:bold;
}

table.marinemap-table th.bioheader {
    background-color:#95291A;
    color:#B0B0B0;
    font-family:helvetica;
    font-weight:bold;
}

table.marinemap-table th.humheader {
    background-color:#FEAB30;
    color:#F0F0F0;
    font-family:helvetica;
    font-weight:bold;
}

table.marinemap-table th {
    background-color:#D0D0D0;
    color:#344E63;
}

table.marinemap-table th.left {
    background-color:#D0D0D0;
    color:#344E63;
    font-weight:bold;
    text-align:left;
}

table.marinemap-table td {
    background-color:#EBF5F5;
    color:#344E63;
    text-align:center;
}

table.marinemap-table td.left {
    background-color:#EBF5F5;
    color:#344E63;
    text-align:left;
    vertical-align: text-top;
}

table.marinemap-table td.top {
    background-color:#EBF5F5;
    color:#344E63;
    vertical-align: text-top;
}

table.marinemap-table thead tr {
    background:#FAFAFA url(../images/toolbar-bg.png) repeat-x scroll left bottom;
    text-align:center;
}

table.marinemap-table tbody {
    background-color:white;
}

table.marinemap-table tr.zebra {
    background-color:#eee;
}
</style>


