<h1 align="center">{{ geo.nsh.name }} Comprehensive Analysis Report</h1>

<div class="img" align="middle" >
    <img align="top" src="{% url staticmap-show 'default' %}?mpas={{ geo.nsh.id }}&amp;autozoom=true&amp;width=308&amp;height=400">
    &nbsp; &nbsp;
    <img align="top" src="{% url staticmap-show 'default' %}?mpas={{ geo.nsh.id }}&amp;width=154&amp;height=200">
</div>

<div class="freetext">
<h4>Report Summary</h4>
<table class='allowed_uses'>
<tr><td width=150>Type:</td><td>Comprehensive</td></tr>
<tr><td width=150>Nearshore Habitat:</td><td>{{ geo.nsh.name }}</td></tr>
<tr><td width=150>ID #:</td><td>{{ geo.nsh.id }}</td></tr>
</table>
</div>

<div class='freetext'>

<!-- Geographic Report -->

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="geoheader" colspan="5">General Spatial Characteristics</th>
        </tr>
        <tr>
            <th>Area</th>
            <th>Perimeter</th>
            <th>Intertidal</th>
            <th>Islands</th>
            <th>Percent of Territorial Sea</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>{{geo.area|floatformat:'2'}} ({{geo.area_units}})</td>
            <td>{{geo.perimeter|floatformat:'2'}} ({{geo.length_units}})</td>
            <td>{{geo.intertidal}}</td>
            <td>{{geo.islands}}</td>
            <td>{{geo.ratio|floatformat:'2'}} %</td>
        </tr>
    </tbody>
</table>
<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="geoheader" colspan="4">Geographic Setting</font></th>
        </tr>
        <tr>
            <th>Adjacent County</th>
            <th>County Shoreline Percentage</th>
            <th>Nearest Ports</th>
            <th>Nearest Incorporated Cities</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>{{geo.county.0}}</td>
            <td>{{geo.county_shoreline_percentages.0|floatformat:'1'}} %</td>
            <td>{{geo.ports.0.0}}  ({{geo.ports.0.1|floatformat:'1'}} {{geo.length_units}})</td>
            <td>{{geo.cities.0.0}}  ({{geo.cities.0.1|floatformat:'1'}} {{geo.length_units}})</td>
        </tr>
        <tr>
            <td>{{geo.county.1}}</td>
            <td>{% if geo.county.1 %} {{geo.county_shoreline_percentages.1|floatformat:'1'}} % {% endif %}</td>
            <td>{{geo.ports.1.0}}  ({{geo.ports.1.1|floatformat:'1'}} {{geo.length_units}})</td>
            <td>{{geo.cities.1.0}}  ({{geo.cities.1.1|floatformat:'1'}} {{geo.length_units}})</td>
        </tr>
        <tr>
            <td>{{geo.county.2}}</td>
            <td>{% if geo.county.2 %} {{geo.county_shoreline_percentages.2|floatformat:'1'}} % {% endif %}</td>
            <td>{{geo.ports.2.0}}  ({{geo.ports.2.1|floatformat:'1'}} {{geo.length_units}})</td>
            <td>{{geo.cities.2.0}}  ({{geo.cities.2.1|floatformat:'1'}} {{geo.length_units}})</td>
        </tr>
    </tbody>
</table>


<!-- Physical Report -->

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="phyheader" colspan="7">Intertidal Physical Characteristics</th>
        </tr>
        <tr>
            <th>Length of Intertidal Shoreline</th>
            <th>Percent of Oregon Coast Shoreline</th>
            <th colspan="3">Shoreline Types & Proportions</th>
            <th>Number of Islands</th>
            <th>Total Island Area</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="top">{{phy.length|floatformat:'2'}} ({{phy.length_units}})</td>
            {% if phy.percent_shoreline == phy.default_value %}
            <td class="top">{{phy.default_value}}</td>
            {% else %}
            <td class="top">{{phy.percent_shoreline|floatformat:'2'}} %</td>
            {% endif %}
            <td colspan="3">
                {% for proportion in phy.shoreline_proportions %}
                    {{proportion.0|floatformat:'0'}}% &nbsp; &nbsp; {{proportion.1}} &nbsp; &nbsp; ({{proportion.2|floatformat:'2'}} {{phy.length_units}}) </br>
                {% endfor %}
            </td>
            <td class="top">{{phy.islands}} islands</td>
            {% if phy.island_area == phy.default_value %}
            <td class="top">{{phy.default_value}}</td>
            {% else %}
            <td class="top">{{phy.island_area|floatformat:'3'}} ({{phy.area_units}})</td>
            {% endif %}
        </tr>
    </tbody>
</table>

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="phyheader" colspan="6">Subtidal Physical Characteristics</th>
        </tr>
        <tr>
            <th>Subtidal Area</th>
            <th>Percent Shallow <br/>Percent Deep</th>
            <th>Seafloor Lithology</th>
            <th>Average Depth</th>
            <th>Min Depth <br/> Max Depth</th>
            <th>Proximity to Shore</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="top">{{phy.subtidal_area|floatformat:'1'}} ({{phy.area_units}})</td>
            <td class="top">{{phy.perc_shallow|floatformat:'1'}} % &nbsp; shallow<br/> {{phy.perc_deep|floatformat:'1'}} % &nbsp; deep</td>
            <td>
                {% for proportion in phy.lithology_proportions %}
                    {{proportion.0|floatformat:'1'}}% &nbsp; {{proportion.1}} &nbsp; ({{proportion.2|floatformat:'2'}} {{phy.length_units}}) </br>
                {% endfor %}
            </td>
            <td class="top">{{phy.average_depth|floatformat:'1'}} (meters)</td>
            <td class="top">{{phy.min_depth|floatformat:'1'}} meters <br/> {{phy.max_depth|floatformat:'1'}} meters</td>
            <td class="top">{{phy.distance_to_shore|floatformat:'1'}} ({{phy.length_units}})</td>
        </tr>
    </tbody>
</table>

<!-- Biology Report -->

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="bioheader" colspan="2">Terrestrial Biological Characteristics</font></th>
        </tr>
        <tr>
            <th>Nearest Western Snowy Plover Critical Habitat</th>
            <th>Nearest Marbled Murrelet Critical Habitat</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>{{bio.nearest_snowy_plover|floatformat:'1'}} {{bio.length_units}} &nbsp; </td>
            <td>{{bio.nearest_marbled_murrelet|floatformat:'1'}} {{bio.length_units}} &nbsp; </td>
        </tr>
    </tbody>
</table>
        
<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="bioheader" colspan="3">Intertidal Biological Characteristics</th>
        </tr>
        <tr>
            <th>Pinniped Haulouts</th>
            <th>Steller Sea Lion Rookeries</th>
            <th>Bird Colonies</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            {% if bio.num_haulouts == 0 %}
            <td>No ({{bio.num_haulouts}} haulouts)</td>
            {% else %}
            <td>Yes ({{bio.num_haulouts}} haulouts)</td>
            {% endif %}
            
            {% if bio.num_rookeries == 0 %}
            <td>No ({{bio.num_rookeries}} rookeries)</td>
            {% else %}
            <td>Yes ({{bio.num_rookeries}} rookeries)</td>
            {% endif %}
            
            {% if bio.bird_colonies == 0 %}
            <td>No ({{bio.bird_colonies}} colonies) &nbsp;</td>
            {% else %}
            <td>Yes ({{bio.bird_colonies}} colonies) &nbsp;</td>
            {% endif %}
        </tr>
    </tbody>
</table>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th>Steller Sea Lion Critical Habitats</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            {% if bio.num_sealion_habs == 0 %}
            <td>None</td>
            {% else %}
            <td>
            {% for hab in bio.sealion_habs %}
                {{hab.0}} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{hab.1}} </br>
            {% endfor %}
            </td>
            {% endif %}
        </tr>
    </tbody>
</table>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th colspan="2">Pinniped Haulout Details</th>
            <th colspan="2">Bird Colony Details</th>
        </tr>
    </thead>
    <tbody>
        <tr>
        <td class="top" colspan="2">
        {% for site in bio.haulout_sites %}
            {{site.0.0}} , ({{site.0.1}})</br>
            {% for species in site.1 %}
                &nbsp; &nbsp; &nbsp; {{species}} </br>
            {% endfor %}
            </br>
        {% endfor %}
        </td>
        
        <td colspan="2">
        {% for details in bio.bird_details %}
            {{details.0.0}} , (Colony #{{details.0.1}})</br>
            {% for bird in details.1 %}
                &nbsp; &nbsp; &nbsp; {{bird}}</br>
            {% endfor %}
            </br>
        {% endfor %}
        </td>
            
        </tr>
    </tbody>
</table>

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="bioheader" colspan="5">Subtidal Biological Characteristics</th>
        </tr>
        <tr>
            <th>Habitat Types & Proportions</th>
            <th>Predicted Fish Species <br></br>(Provided by <a target="_blank" href="http://www.nwfsc.noaa.gov/">NOAA's Northwest Fisheries Science Center)</a></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="top">
            {% for details in bio.habitat_proportions %}
                {{details.0|floatformat:'2'}} % &nbsp; {{details.1}} &nbsp; ({{details.2|floatformat:'2'}} {{bio.area_units}})</br>
            {% endfor %}
            </td>
            <td>
            {% for fish in bio.fish_list %}
                {{fish}}</br>
            {% endfor %}
            </td>
        </tr>
    </tbody>
</table>

<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th>Green Sturgeon</th>
            <th>Green Sturgeon Area Percentage</th>
            {% if bio.intersecting_coho_streams != 'No' %}
            <th>Coho Populated Streams</th>
            {% else %}
            <th>Nearest Coho Populated Stream</th>
            {% endif %}
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>{{bio.green_sturgeon}}</td>
            <td>{{bio.green_sturgeon_perc|floatformat:'1'}} %</td>
            {% if bio.intersecting_coho_streams != 'No' %}
            <td>{{bio.intersecting_coho_streams}}</td>
            {% else %}
            <td>{{bio.nearest_coho_stream|floatformat:'1'}} {{bio.length_units}}</td>
            {% endif %}
        </tr>
    </tbody>
</table>

<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th>Kelp Survey Year</th>
            <th>Kelp Proportions</th>
        </tr>
    </thead>
    <tbody>
        {% if bio.kelp_data.0.2 == bio.default_value %}
            <tr>
                <td>{{bio.kelp_data.0.0}}</td>
                <td></td>
            </tr>
        {% else %}
            {% for data in bio.kelp_data %}
            <tr class="{% cycle '' 'grey' %}">
                <td>{{data.0}}</td>
                <td>{{data.1|floatformat:'2'}} {{bio.area_units}} &nbsp; ({{data.2|floatformat:'2'}} % of Proposed Site)</td>
            </tr>
            {% endfor %}
        {% endif %}
    </tbody>
</table>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            {% if bio.seagrass_area == 0.0 %}
            <th>SeaGrass</th>
            {% else %}
            <th>SeaGrass Area</th>
            {% endif %}
        </tr>
    </thead>
    <tbody>
        <tr>
            {% if bio.seagrass_area == 0.0 %}
            <td>None</td>
            {% else %}
            <td>{{bio.seagrass_area|floatformat:'2'}} {{bio.area_units}}</td>
            {% endif %}
        </tr>
    </tbody>
</table>

<!-- Human Uses Report -->

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="humheader" colspan="3">Community & Recreational Considerations</th>
        </tr>
        <tr>
            <th>Nearest State Parks</th>
            <th>Nearest Public Access</th>
            <th>Nearest Rocky Shore Areas</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
            {% for park in hum.parks %}
                {{park.0}} State Park &nbsp; ({{park.1|floatformat:'1'}} {{hum.length_units}})</br>
            {% endfor %}
            </td>
            <td>
            {% for site in hum.access_sites %}
                {{site.0}} &nbsp; ({{site.1|floatformat:'1'}} {{hum.length_units}})</br>
            {% endfor %}
            </td>
            <td>
            {% for rockyshore in hum.rockyshores %}
                {{rockyshore.0}} &nbsp; ({{rockyshore.1|floatformat:'1'}} {{hum.length_units}})</br>
            {% endfor %}
            </td>
        </tr>
    </tbody>
</table>

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="humheader" colspan="3">Transportation & Infrasructure Considerations</font></th>
        </tr>
        <tr>
            <th>Dredge Materials Disposal Sites</th>
            <th>NPDES Outfall</th>
            <th>Undersea Cables</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
            {% for data in hum.intersecting_dmds %}
                {{data}}</br>
            {% endfor %}
            </td>
            <td>
            {% for data in hum.intersecting_outfalls %}
                {{data}}</br>
            {% endfor %}
            </td>
            <td>
            {% for data in hum.intersecting_cables %}
                {{data}}</br>
            {% endfor %}
            </td>
        </tr>
    </tbody>
    <thead>
        <tr>
            <th>Nearest (non-intersecting) DMD Site</th>
            <th>Nearest (non-intersecting) Outfall Site</th>
            <th>Nearest (non-intersecting) Cable Route</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>{{hum.nearest_dmd.0}} ({{hum.nearest_dmd.1|floatformat:'1'}} {{hum.length_units}})</td>
            <td>{{hum.nearest_outfall.0}} ({{hum.nearest_outfall.1|floatformat:'1'}} {{hum.length_units}})</td>
            <td>{{hum.nearest_cable.0}} ({{hum.nearest_cable.1|floatformat:'1'}} {{hum.length_units}})</td>
        </tr>
    </tbody>
</table>

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="humheader" colspan="4">Fishery Considerations</font></th>
        </tr>
        <tr>
            <th colspan="2">Proximity to Ports</th>
            <th colspan="2">Nearest Marinas</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td colspan="2" class="top">
                {% for port in hum.nearest_ports %}
                    {{port.0}} ({{port.1|floatformat:'1'}} {{hum.length_units}})</br>
                {% endfor %}
            </td>
            <td colspan="2" class="top">
                {% for marina in hum.nearest_marinas %}
                    {{marina.0}} ({{marina.1|floatformat:'1'}} {{hum.length_units}})</br>
                {% endfor %}
            </td>
        </tr>
        <tr><td></td><td></td><td></td></tr>
    </tbody>
</table>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th>Marine Managed Areas</th>
            <th>ODFW Closures</th>
            <th>EFH Conservation Areas</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="top">
                {% for mma in hum.intersecting_mmas %}
                    {{mma}}</br>
                {% endfor %}
            </td>
            <td class="top">
                {% for closure in hum.intersecting_closures %}
                    {{closure}}</br>
                {% endfor %}
            </td>
            <td class="top">
                {% for area in hum.intersecting_conservation_areas %}
                    {{area}}</br>
                {% endfor %}
            </td>
        </tr>
    </tbody>
</table>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th>Nearest (non-intersecting) MMAs</th>
            <th>Nearest (non-intersecting) ODFW Closure</th>
            <th>Nearest (non-intersecting) Conservation Area</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="top">
                {% for mma in hum.nearest_mmas %}
                    {{mma.0}} ({{mma.1|floatformat:'1'}} {{hum.length_units}})</br>
                {% endfor %}
            </td>
            <td class="top">
               {{hum.nearest_closure.0}} ({{hum.nearest_closure.1|floatformat:'1'}} {{hum.length_units}})
            </td>
            <td class="top">
                {{hum.nearest_conservation_area.0}} ({{hum.nearest_conservation_area.1|floatformat:'1'}} {{hum.length_units}})</br>
            </td>
        </tr>
    </tbody>
</table>

<br></br>
<br></br>

</div>

<style type="text/css">
div.img {
    margin-left: auto;
    margin-right: auto;
    zoom: 80%;
}

table.marinemap-table {
    font-size:12px;
    width:100%;
    border:solid 1px #fff;
    margin:3px;
    padding-top:4px;
}

table.marinemap-table th.geoheader {
    background-color:#518E58;
    color:#B0B0B0;
    font-family:helvetica;
    font-weight:bold;
}

table.marinemap-table th.phyheader {
    background-color:#4D50DF;
    color:#B0B0B0;
    font-family:helvetica;
    font-weight:bold;
}

table.marinemap-table th.bioheader {
    background-color:#95291A;
    color:#B0B0B0;
    font-family:helvetica;
    font-weight:bold;
}

table.marinemap-table th.humheader {
    background-color:#FEAB30;
    color:#F0F0F0;
    font-family:helvetica;
    font-weight:bold;
}

table.marinemap-table th {
    background-color:#D0D0D0;
    color:#344E63;
    font-weight:bold;
}

table.marinemap-table th.left {
    background-color:#D0D0D0;
    color:#344E63;
    font-weight:bold;
    text-align:left;
}

table.marinemap-table td {
    background-color:#EBF5F5;
    color:#344E63;
    font-weight:bold;
    text-align:center;
}

table.marinemap-table td.left {
    background-color:#EBF5F5;
    color:#344E63;
    font-weight:bold;
    text-align:left;
    vertical-align: text-top;
}

table.marinemap-table td.top {
    background-color:#EBF5F5;
    color:#344E63;
    font-weight:bold;
    vertical-align: text-top;
}

table.marinemap-table thead tr {
    background:#FAFAFA url(../images/toolbar-bg.png) repeat-x scroll left bottom;
    text-align:center;
}

table.marinemap-table tbody {
    background-color:white;
}

table.marinemap-table tr.zebra {
    background-color:#eee;
}
</style>


