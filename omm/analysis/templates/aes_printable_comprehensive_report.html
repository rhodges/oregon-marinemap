<h1 align="center">{{ geo.aes.name }} Comprehensive Analysis Report</h1>

<div class="img" align="middle" >
    <img align="top" src="{% url staticmap-show 'default' %}?mpas={{ geo.aes.id }}&amp;autozoom=true&amp;width=308&amp;height=400">
    &nbsp; &nbsp;
    <img align="top" src="{% url staticmap-show 'default' %}?mpas={{ geo.aes.id }}&amp;width=154&amp;height=200">
</div>

<div class="freetext">
<h4>Report Summary</h4>
<table class='allowed_uses'>
<tr><td width=150>Type:</td><td>Comprehensive</td></tr>
<tr><td width=150>Nearshore Habitat:</td><td>{{ geo.aes.name }}</td></tr>
<tr><td width=150>ID #:</td><td>{{ geo.aes.id }}</td></tr>
</table>
</div>

<div class='freetext'>

<!-- Geographic Report -->

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="geoheader" colspan="5">Geographic Setting</font></th>
        </tr>
        <tr>
            <th>Adjacent County</th>
            <th>Distance to Nearest Railroad</th>
            <th>Nearest Ports</th>
            <th>Nearest Marinas</th>
            <th>Nearest Incorporated Cities</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>{{geo.county.0}}</td>
            <td>{{geo.railroad|floatformat:'1'}} {{geo.length_units}}</td>
            <td>{{geo.ports.0.0}}  ({{geo.ports.0.1|floatformat:'1'}} {{geo.length_units}})</td>
            <td>{{geo.marinas.0.0}}  ({{geo.marinas.0.1|floatformat:'1'}} {{geo.length_units}})</td>
            <td>{{geo.cities.0.0}}  ({{geo.cities.0.1|floatformat:'1'}} {{geo.length_units}})</td>
        </tr>
        <tr>
            <td>{{geo.county.1}}</td>
            <td></td>
            <td>{{geo.ports.1.0}}  ({{geo.ports.1.1|floatformat:'1'}} {{geo.length_units}})</td>
            <td>{{geo.marinas.1.0}}  ({{geo.marinas.1.1|floatformat:'1'}} {{geo.length_units}})</td>
            <td>{{geo.cities.1.0}}  ({{geo.cities.1.1|floatformat:'1'}} {{geo.length_units}})</td>
        </tr>
        <tr>
            <td>{{geo.county.2}}</td>
            <td></td>
            <td>{{geo.ports.2.0}}  ({{geo.ports.2.1|floatformat:'1'}} {{geo.length_units}})</td>
            <td>{{geo.marinas.2.0}}  ({{geo.marinas.2.1|floatformat:'1'}} {{geo.length_units}})</td>
            <td>{{geo.cities.2.0}}  ({{geo.cities.2.1|floatformat:'1'}} {{geo.length_units}})</td>
        </tr>
    </tbody>
    <thead>
        <tr>
            <th>Nearest Rocky Shore Areas</th>
            <th>Nearest Electical Substations</th>
            <th>Nearest Transmission Line (1993)</th>
            <th colspan="2">Nearest Transmission Line (2010)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>{{geo.rockyshores.0.0}}  ({{geo.rockyshores.0.1|floatformat:'1'}} {{geo.length_units}})</td>
            <td>{{geo.substations.0.0}}  ({{geo.substations.0.1|floatformat:'1'}} {{geo.length_units}})</td>
            <td>{{geo.transmissionline1993|floatformat:'1'}} {{geo.length_units}}</td>
            <td colspan="2">{{geo.transmissionline2010.0.0}}  ({{geo.transmissionline2010.0.1|floatformat:'2'}} {{geo.length_units}})</td>
        </tr>
        <tr>
            <td>{{geo.rockyshores.1.0}}  ({{geo.rockyshores.1.1|floatformat:'1'}} {{geo.length_units}})</td>
            <td>{{geo.substations.1.0}}  ({{geo.substations.1.1|floatformat:'1'}} {{geo.length_units}})</td>
            <td></td>
            <td colspan="2"></td>
        </tr>
        <tr>
            <td>{{geo.rockyshores.2.0}}  ({{geo.rockyshores.2.1|floatformat:'1'}} {{geo.length_units}})</td>
            <td>{{geo.substations.2.0}}  ({{geo.substations.2.1|floatformat:'1'}} {{geo.length_units}})</td>
            <td></td>
            <td colspan="2"></td>
        </tr>
    </tbody>
</table>

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="geoheader" colspan="6">General Site Characteristics</th>
        </tr>
        <tr>
            <th>Area</th>
            <th>Perimeter</th>
            <th>Intertidal</th>
            <th>Islands</th>
            <th>Visible From Shore</th>
            <th>Percent of Territorial Sea</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>{{geo.area|floatformat:'2'}} ({{geo.area_units}})</td>
            <td>{{geo.perimeter|floatformat:'2'}} ({{geo.length_units}})</td>
            <td>{{geo.intertidal}}</td>
            <td>{{geo.islands}}</td>
            <td>{{geo.visible}}</td>
            <td>{{geo.ratio|floatformat:'2'}} %</td>
        </tr>
    </tbody>
</table>

<!-- Physical Report -->

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="phyheader" colspan="7">Intertidal Physical Characteristics</th>
        </tr>
        <tr>
            <th>Length of Intertidal Shoreline</th>
            <th>Percent of Oregon Coast Shoreline</th>
            <th colspan="3">Shoreline Types & Proportions</th>
            <th>Number of Islands</th>
            <th>Total Island Area</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>{{phy.length|floatformat:'2'}} ({{phy.length_units}})</td>
            {% if phy.percent_shoreline == phy.default_value %}
            <td>{{phy.default_value}}</td>
            {% else %}
            <td>{{phy.percent_shoreline|floatformat:'2'}} %</td>
            {% endif %}
            <td colspan="3">
                {% for proportion in phy.shoreline_proportions %}
                    {{proportion.0|floatformat:'0'}}% &nbsp; &nbsp; {{proportion.1}} &nbsp; &nbsp; ({{proportion.2|floatformat:'2'}} {{phy.length_units}}) </br>
                {% endfor %}
            </td>
            <td>{{phy.islands}} islands</td>
            {% if phy.island_area == phy.default_value %}
            <td>{{phy.default_value}}</td>
            {% else %}
            <td>{{phy.island_area|floatformat:'3'}} ({{phy.area_units}})</td>
            {% endif %}
        </tr>
    </tbody>
</table>

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="phyheader" colspan="6">Subtidal Physical Characteristics</th>
        </tr>
        <tr>
            <th>Subtidal Area</th>
            <th>Percent Shallow <br/>Percent Deep</th>
            <th colspan="2">Seafloor Lithology</th>
            <th>Average Depth</th>
            <th>Proximity to Shore</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>{{phy.subtidal_area|floatformat:'1'}} ({{phy.area_units}})</td>
            <td>{{phy.perc_shallow|floatformat:'1'}} % &nbsp; shallow<br/> {{phy.perc_deep|floatformat:'1'}} % &nbsp; deep</td>
            <td colspan="2">
                {% for proportion in phy.lithology_proportions %}
                    {{proportion.0|floatformat:'1'}}% &nbsp; {{proportion.1}} &nbsp; ({{proportion.2|floatformat:'2'}} {{phy.length_units}}) </br>
                {% endfor %}
            </td>
            <td>{{phy.average_depth|floatformat:'2'}} (meters)</td>
            <td>{{phy.distance_to_shore|floatformat:'1'}} ({{phy.length_units}})</td>
        </tr>
    </tbody>
</table>

<!-- Biology Report -->

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="bioheader" colspan="6">Intertidal Biological Characteristics</th>
        </tr>
        <tr>
            <th colspan="2">Pinniped Haulouts</th>
            <th colspan="2">Steller Sea Lion Rookeries</th>
            <th colspan="2">Bird Colonies</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            {% if bio.num_haulouts == 0 %}
            <td colspan="2">No ({{bio.num_haulouts}} haulouts)</td>
            {% else %}
            <td colspan="2">Yes ({{bio.num_haulouts}} haulouts)</td>
            {% endif %}
            
            {% if bio.num_rookeries == 0 %}
            <td colspan="2">No ({{bio.num_rookeries}} rookeries)</td>
            {% else %}
            <td colspan="2">Yes ({{bio.num_rookeries}} rookeries)</td>
            {% endif %}
            
            {% if bio.bird_colonies == 0 %}
            <td colspan="2">No ({{bio.bird_colonies}} colonies) &nbsp;</td>
            {% else %}
            <td colspan="2">Yes ({{bio.bird_colonies}} colonies) &nbsp;</td>
            {% endif %}
        </tr>
    </tbody>
    <thead>
        <tr>
            <th colspan="2">{% if bio.num_haulouts == 0 %}&nbsp;{% else %}Pinniped Haulout Details{% endif %}</th>
            <th colspan="2">Steller Sea Lion Critical Habitats</th>
            <th colspan="2">{% if bio.bird_colonies == 0 %}&nbsp;{% else %}Bird Colony Details{% endif %}</th>
        </tr>
    </thead>
    <tbody>
        <tr>
        <td class="top" colspan="2">
        {% for site in bio.haulout_sites %}
            {{site.0.0}} , ({{site.0.1}})</br>
            {% for species in site.1 %}
                &nbsp; &nbsp; &nbsp; {{species}} </br>
            {% endfor %}
            </br>
        {% endfor %}
        </td>
        
        <td class="top" colspan="2">
        {% if bio.num_sealion_habs == 0 %}
            None
        {% else %}
        {% for hab in bio.sealion_habs %}
            {{hab.0}} , ({{hab.1}})</br>
        {% endfor %}
        {% endif %}
        </td>        
        
        <td colspan="2">
        {% for details in bio.bird_details %}
            {{details.0.0}} , (Colony #{{details.0.1}})</br>
            {% for bird in details.1 %}
                &nbsp; &nbsp; &nbsp; {{bird}}</br>
            {% endfor %}
            </br>
        {% endfor %}
        </td>
            
        </tr>
    </tbody>
</table>

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="bioheader" colspan="3">Subtidal Biological Characteristics</th>
        </tr>
        <tr>
            <th>Habitat Types & Proportions</th>
            <th></th>
            <th>Predicted Fish Species <br></br>(Provided by <a target="_blank" href="http://www.nwfsc.noaa.gov/">NOAA's Northwest Fisheries Science Center)</a></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="top">
            {% for details in bio.habitat_proportions %}
                {{details.0|floatformat:'2'}} % &nbsp; {{details.1}} &nbsp; ({{details.2|floatformat:'2'}} {{bio.area_units}})</br>
            {% endfor %}
            </td>
            <td></td>
            <td>
            {% for fish in bio.fish_list %}
                {{fish}}</br>
            {% endfor %}
            </td>
        </tr>
    </tbody>
    <thead>
        <tr>
            <th>Kelp Survey Year</th>
            <th>Kelp Proportions</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        {% if bio.kelp_data.0.2 == bio.default_value %}
            <tr>
                <td>{{bio.kelp_data.0.0}}</td>
                <td></td>
                <td></td>
            </tr>
        {% else %}
            {% for data in bio.kelp_data %}
            <tr class="{% cycle '' 'grey' %}">
                <td>{{data.0}}</td>
                <td>{{data.1|floatformat:'2'}} {{bio.area_units}} &nbsp; ({{data.2|floatformat:'2'}} % of Proposed Site)</td>
                <td></td>
            </tr>
            {% endfor %}
        {% endif %}
    </tbody>
    <thead>
        <tr>
            <th>Seagrass Area</th>
            <th>Green Sturgeon</th>
            <th>Green Sturgeon Area Percentage</th>
        </tr>
    </thead>
    <tbody>
        <tr class="{% cycle '' 'grey' %}">
            <td>{{bio.seagrass_area|floatformat:'2'}} {{bio.area_units}}</td>
            <td>{{bio.green_sturgeon}}</td>
            <td>{{bio.green_sturgeon_perc|floatformat:'1'}} %</td>
        </tr>
        <tr class="{% cycle '' 'grey' %}">
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </tbody>
</table>

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="bioheader" colspan="3">Terrestrial and Estuarine Biological Characteristics</font></th>
        </tr>
        <tr>
            <th>Nearest Western Snowy Plover Critical Habitat</th>
            <th>Nearest Marbled Murrelet Critical Habitat</th>
            <th>Nearest Coho Populated Stream</th>
        </tr>
    </thead>
    <tbody>
        <tr class="{% cycle '' 'grey' %}">
            <td>{{bio.nearest_snowy_plover|floatformat:'1'}} {{bio.length_units}}</td>
            <td>{{bio.nearest_marbled_murrelet|floatformat:'1'}} {{bio.length_units}}</td>
            <td>{{bio.nearest_coho_stream|floatformat:'1'}} {{bio.length_units}}</td>
        </tr>
        <tr class="{% cycle '' 'grey' %}">
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </tbody>
</table>

<!-- Human Uses Report -->

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="humheader" colspan="3">Community & Recreational Considerations</th>
        </tr>
        <tr>
            <th>Nearest Urban Growth Boundaries</th>
            <th>Nearest State Parks</th>
            <th>Nearest Public Access</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
            {% for ugb in hum.urbangrowthboundaries %}
                {{ugb.0}} &nbsp; ({{ugb.1|floatformat:'2'}} {{hum.length_units}})</br>
            {% endfor %}
            </td>
            <td>
            {% for park in hum.parks %}
                {{park.0}} State Park &nbsp; ({{park.1|floatformat:'2'}} {{hum.length_units}})</br>
            {% endfor %}
            </td>
            <td>
            {% for site in hum.access_sites %}
                {{site.0}} &nbsp; ({{site.1|floatformat:'1'}} {{hum.length_units}})</br>
            {% endfor %}
            </td>
        </tr>
    </tbody>
</table>

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="humheader" colspan="10">Existing or Proposed Transportation & Infrasructure Considerations</th>
        </tr>
        <tr>
            <th colspan="3">Intersecting Aiports</th>
            <th colspan="3">Buoys</th>
            <th colspan="3">Beacons</th>
            <th colspan="1">Signal Equipment</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td colspan="3">{% for airport in hum.intersecting_airports %} {{airport}}<br>{% endfor %}</td>
            <td colspan="3">{{hum.buoy_data.0}}</td>
            <td colspan="3">{{hum.beacon_data.0}}</td>
            <td colspan="1">{{hum.signal_data.0}}</td>
        </tr>
    </tbody>
    <thead>
        <tr>
            <th colspan="3">Nearest Airport</th>
            {% if hum.buoy_data.0 == 'Yes' %}
                <th colspan="3">Intersecting Buoys</th>
            {% else %}
                <th colspan="3">Closest Buoy</th>
            {% endif %}
            
            {% if hum.beacon_data.0 == 'Yes' %}
                <th colspan="3">Intersecting Beacons</th>
            {% else %}
                <th colspan="3">Closest Beacon</th>
            {% endif %}
            
            {% if hum.signal_data.0 == 'Yes' %}
                <th colspan="1">Intersecting Signal Equipment</th>
            {% else %}
                <th colspan="1">Closest Signal Equipment</th>
            {% endif %}
        </tr>
    </thead>
    <tbody>
        <tr>
            <td colspan="3">{{hum.nearest_airport.0}} ({{hum.nearest_airport.1|floatformat:'1'}} {{hum.length_units}})</td>
            <td colspan="3">
                {% if hum.buoy_data.0 == 'Yes' %}
                    {% for data in hum.buoy_data.1 %}
                        {{data}}</br>
                    {% endfor %}
                {% else %}
                    {{hum.buoy_data.1.0}} ({{hum.buoy_data.1.1|floatformat:'2'}} {{hum.length_units}})
                {% endif %}
            </td>
            <td colspan="3">
                {% if hum.beacon_data.0 == 'Yes' %}
                    {% for data in hum.beacon_data.1 %}
                        {{data}}</br>
                    {% endfor %}
                {% else %}
                    {{hum.beacon_data.1.0}} ({{hum.beacon_data.1.1|floatformat:'2'}} {{hum.length_units}})
                {% endif %}
            </td>
            <td colspan="1">
                {% if hum.signal_data.0 == 'Yes' %}
                    {% for data in hum.signal_data.1 %}
                        {{data}}</br>
                    {% endfor %}
                {% else %}
                    {{hum.signal_data.1.0}} ({{hum.signal_data.1.1|floatformat:'2'}} {{hum.length_units}})
                {% endif %}
            </td>
        </tr>
    </tbody>
    <thead>
        <tr>
            <th colspan="2">Dredge Materials Disposal</th>
            <th colspan="2">NPDES Outfall</th>
            <th colspan="2">Undersea Cables</th>
            <th colspan="2">Towlanes</th>
            <th colspan="2">Wave Energy</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td colspan="2">{{hum.dmd_data.0}}</td>
            <td colspan="2">{{hum.outfall_data.0}}</td>
            <td colspan="2">{{hum.cable_data.0}}</td>
            <td colspan="2">{{hum.towlanes}}</td>
            <td colspan="2">{{hum.wave_energy_data.0}}</td>
        </tr>
    </tbody>
    <thead>
        <tr>
            {% if hum.dmd_data.0 == 'Yes' %}
                <th colspan="2">Intersecting DMD Sites</th>
            {% else %}
                <th colspan="2">Closest DMD Site</th>
            {% endif %}
            
            {% if hum.outfall_data.0 == 'Yes' %}
                <th colspan="2">Intersecting Outfall Sites</th>
            {% else %}
                <th colspan="2">Closest Outfall</th>
            {% endif %}
            
            {% if hum.cable_data.0 == 'Yes' %}
                <th colspan="2">Intersecting Cables</th>
            {% else %}
                <th colspan="2">Closest Cable</th>
            {% endif %}
            
            <th colspan="2">
            
            {% if hum.wave_energy_data.0 == 'Yes' %}
                <th colspan="2">Intersecting Wave Energy</th>
            {% else %}
                <th colspan="2">Closest Wave Energy</th>
            {% endif %}
        </tr>
    </thead>
    <tbody>
        <tr>
            <td colspan="2">
                {% if hum.dmd_data.0 == 'Yes' %}
                    {% for data in hum.dmd_data.1 %}
                        {{data}}</br>
                    {% endfor %}
                {% else %}
                    {{hum.dmd_data.1.0}} ({{hum.dmd_data.1.1|floatformat:'2'}} {{hum.length_units}})
                {% endif %}
            </td>
            <td colspan="2">
                {% if hum.outfall_data.0 == 'Yes' %}
                    {% for data in hum.outfall_data.1 %}
                        {{data}}</br>
                    {% endfor %}
                {% else %}
                    {{hum.outfall_data.1.0}} ({{hum.outfall_data.1.1|floatformat:'2'}} {{hum.length_units}})
                {% endif %}
            </td>
            <td colspan="2">
                {% if hum.cable_data.0 == 'Yes' %}
                    {% for data in hum.cable_data.1 %}
                        {{data}}</br>
                    {% endfor %}
                {% else %}
                    {{hum.cable_data.1.0}} ({{hum.cable_data.1.1|floatformat:'2'}} {{hum.length_units}})
                {% endif %}
            </td>
            <td colspan="2"></td>
            <td colspan="2">
                {% if hum.wave_energy_data.0 == 'Yes' %}
                    {% for data in hum.wave_energy_data.1 %}
                        {{data}}</br>
                    {% endfor %}
                {% else %}
                    {{hum.wave_energy_data.1.0.0}} ({{hum.wave_energy_data.1.0.1|floatformat:'2'}} {{hum.length_units}})
                {% endif %}
            </td>
        </tr>
    </tbody>
    
</table>

<br></br>
<table class='marinemap-table' rules=rows>
    <thead>
        <tr>
            <th class="humheader" colspan="4">Fishery Considerations</th>
        </tr>
        <tr>
            <th>Proximity to Ports</th>
            <th>Proximity to Existing State MMAs</th>
            <th>Proximity to ODFW Closures</th>
            <th>Proximity to EFH Conservation Areas</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                {% for port in hum.nearest_ports %}
                    {{port.0}} ({{port.1|floatformat:'1'}} {{hum.length_units}})</br>
                {% endfor %}
            </td>
            <td>
                {% for mma in hum.nearest_mmas %}
                    {{mma.0}} ({{mma.1|floatformat:'1'}} {{hum.length_units}})</br>
                {% endfor %}
            </td>
            <td>
                {% for closure in hum.nearest_closures %}
                    {{closure.0}} ({{closure.1|floatformat:'1'}} {{hum.length_units}})</br>
                {% endfor %}
            </td>
            <td>
                {% for area in hum.nearest_conservation_areas %}
                    {{area.0}} ({{area.1|floatformat:'1'}} {{hum.length_units}})</br>
                {% endfor %}
            </td>
        </tr>
    </tbody>
</table>

<br></br>
<br></br>

</div>

<style type="text/css">
div.img {
    margin-left: auto;
    margin-right: auto;
    zoom: 80%;
}

table.marinemap-table {
    font-size:12px;
    width:100%;
    border:solid 1px #fff;
    margin:3px;
    padding-top:4px;
}

table.marinemap-table th.geoheader {
    background-color:#518E58;
    color:#B0B0B0;
    font-family:helvetica;
    font-weight:bold;
}

table.marinemap-table th.phyheader {
    background-color:#4D50DF;
    color:#B0B0B0;
    font-family:helvetica;
    font-weight:bold;
}

table.marinemap-table th.bioheader {
    background-color:#95291A;
    color:#B0B0B0;
    font-family:helvetica;
    font-weight:bold;
}

table.marinemap-table th.humheader {
    background-color:#FEAB30;
    color:#F0F0F0;
    font-family:helvetica;
    font-weight:bold;
}

table.marinemap-table th {
    background-color:#D0D0D0;
    color:#344E63;
    font-weight:bold;
}

table.marinemap-table th.left {
    background-color:#D0D0D0;
    color:#344E63;
    font-weight:bold;
    text-align:left;
}

table.marinemap-table td {
    background-color:#EBF5F5;
    color:#344E63;
    font-weight:bold;
    text-align:center;
}

table.marinemap-table td.left {
    background-color:#EBF5F5;
    color:#344E63;
    font-weight:bold;
    text-align:left;
    vertical-align: text-top;
}

table.marinemap-table td.top {
    background-color:#EBF5F5;
    color:#344E63;
    font-weight:bold;
    vertical-align: text-top;
}

table.marinemap-table thead tr {
    background:#FAFAFA url(../images/toolbar-bg.png) repeat-x scroll left bottom;
    text-align:center;
}

table.marinemap-table tbody {
    background-color:white;
}

table.marinemap-table tr.zebra {
    background-color:#eee;
}
</style>


